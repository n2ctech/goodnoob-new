<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "GoodNoob" %></title>
    <%= favicon_link_tag 'favicon.ico' %>
    <meta name="description" content="<%= content_for?(:description) ? yield(:description) : home_page_description %>">
    <%= stylesheet_link_tag 'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <%= render 'modals/modal' %>
    <% if action_name != 'welcome_page' %>
      <%= render 'layouts/header' %>
    <% end %>
    <section class="main-wrapper">
      <%= content_for?(:messages) ? yield(:messages) : render( 'layouts/messages' ) %>
      <%= yield %>
      <div id='footer_render'>
        <% unless params[:controller] == 'search' || params[:controller] == 'sub_categories' %>
          <%= render 'layouts/footer' %>
        <% end %>
      </div>
    </section>
    <div id='render_modal_bootstrap'>
      <%= render partial: 'shared/bootstrap_modal', locals: { modal_id: 'SignInModal', modal_partial: 'devise/shared/log_in' } %>
      <%= render partial: 'shared/bootstrap_modal', locals: { modal_id: 'SignUpModal', modal_partial: 'devise/shared/register' } %>
      <%= render partial: 'shared/bootstrap_modal', locals: { modal_id: 'NewPost', modal_partial: 'home/new_post_modal' } %>
      <%= render 'layouts/mobile_post_button' %>
    </div>

    <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-hidden="true">
      <form class="search-input">
        <div class="hamburger__icon"></div>
        <button type="submit">
          <i class="fa fa-search"></i>
        </button>
        <input type="text" name="search" placeholder="Search your sport, brand, model...">
        <span aria-label="Close" class="close cancel-search" data-dismiss="modal" type="button">X</span>
      </form>
    </div>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-39404558-4', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- Hotjar Tracking Code for www.goodnoob.com -->
    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:440604,hjsv:5};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
    </script>

    <!-- Load Facebook SDK for JavaScript -->
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
//          appId      : '1806017636079516',
          appId      : '<%= ENV['FACEBOOK_APP_ID'] %>',
          xfbml      : true,
          version    : 'v2.10'
        });
        FB.AppEvents.logPageView();
      };

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

    <script>
      function share_facebook_product(url) {
        FB.ui({
          method: 'share',
          display: 'popup',
          href: url,
        }, function(response){});
      }
    </script>
  </body>
</html>
